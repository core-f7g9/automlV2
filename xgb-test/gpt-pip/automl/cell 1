import os
import boto3
import sagemaker

from sagemaker.workflow.pipeline import Pipeline
from sagemaker.workflow.pipeline_context import PipelineSession
from sagemaker.workflow.parameters import ParameterString, ParameterInteger, ParameterFloat
from sagemaker.workflow.functions import Join
from sagemaker.workflow.execution_variables import ExecutionVariables

from sagemaker.sklearn.processing import SKLearnProcessor
from sagemaker.processing import ProcessingInput, ProcessingOutput
from sagemaker.workflow.steps import ProcessingStep

from sagemaker.automl.automl import AutoML
from sagemaker.workflow.automl_step import AutoMLStep
from sagemaker.automl import AutoML, InputDataConfig

region = boto3.Session().region_name
sm_session = sagemaker.Session()
pipeline_session = PipelineSession()

role = sagemaker.get_execution_role()
default_bucket = sm_session.default_bucket()

PROJECT_PREFIX = "multi-target-autopilot"
PIPELINE_NAME = f"{PROJECT_PREFIX}-train"

# Your lists (edit freely)
TARGET_COLS = ["DepartmentCode", "AccountCode", "SubAccountCode", "LocationCode"]
INPUT_FEATURES = ["VendorName", "LineDescription", "ClubNumber"]

# Input data (CSV with header row)
INPUT_S3 = f"s3://{default_bucket}/{PROJECT_PREFIX}/input/data.csv"

# Pipeline outputs
OUTPUT_BASE = f"s3://{default_bucket}/{PROJECT_PREFIX}/output"
