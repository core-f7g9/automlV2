import os
import json
import boto3
import sagemaker

from sagemaker import get_execution_role
from sagemaker.workflow.pipeline_context import PipelineSession
from sagemaker.workflow.pipeline import Pipeline
from sagemaker.workflow.steps import ProcessingStep
from sagemaker.workflow.functions import Join
from sagemaker.workflow.parameters import ParameterInteger, ParameterString

from sagemaker.processing import ScriptProcessor, ProcessingInput, ProcessingOutput
from sagemaker.workflow.automl_step import AutoMLStep
from sagemaker.automl.automl import AutoML, AutoMLInput

# --- Region / sessions / role ---
region = boto3.Session().region_name
sm_session = sagemaker.Session()
pipeline_session = PipelineSession()
role = get_execution_role()

# --- Project config ---
BUCKET = sm_session.default_bucket()
PROJECT_PREFIX = "multi-target-automl"
INPUT_S3 = f"s3://{BUCKET}/{PROJECT_PREFIX}/input/data.csv"
OUTPUT_PREFIX = f"s3://{BUCKET}/{PROJECT_PREFIX}"

TARGET_COLS = ["DepartmentCode", "AccountCode", "SubAccountCode", "LocationCode"]
INPUT_FEATURES = ["VendorName", "LineDescription", "ClubNumber"]

print("Region:", region)
print("Bucket:", BUCKET)
print("Input:", INPUT_S3)
