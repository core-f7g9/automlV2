import numpy as np

# Get feature (word/phrase) names
terms = np.array(tfidf.get_feature_names_out())

# Cluster centers
centroids = kmeans.cluster_centers_

TOP_N = 10  # number of keywords to show per theme

theme_keywords = {}

for cluster_id in range(NUM_THEMES):
    top_indices = centroids[cluster_id].argsort()[::-1][:TOP_N]
    keywords = terms[top_indices]
    theme_keywords[cluster_id] = ", ".join(keywords)

# Display themes
for cid, kws in theme_keywords.items():
    print(f"Theme {cid}: {kws}")

import matplotlib.pyplot as plt

counts = work_df["theme_cluster"].value_counts().sort_index()

plt.figure()
counts.plot(kind="bar")
plt.title("Number of cases per theme (cluster)")
plt.xlabel("Theme (cluster id)")
plt.ylabel("Number of cases")
plt.show()
